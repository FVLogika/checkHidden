(function($){$.fn.checkHidden=function(options){const settings=$.extend({classFilter:'.checkHidden',hiddenSuffix:'_hidden',oldSuffix:'_hidden_old'},options);function inizializza($checkbox){const name=$checkbox.attr('name'),valore=$checkbox.is(':checked')?'on':'off';if($(`input[name="${name}${settings.oldSuffix}"]`).length==0)$checkbox.after(`<input type="hidden" name="${name}${settings.oldSuffix}" value="${valore}">`);if($(`input[name="${name}${settings.hiddenSuffix}"]`).length==0)$checkbox.after(`<input type="hidden" name="${name}${settings.hiddenSuffix}" value="${valore}">`)}$(document).ready(function(){$(`${settings.classFilter}.form-check-input[name]`).each(function(){inizializza($(this))})});$(document).on('change',`${settings.classFilter}.form-check-input[name]`,function(){const name=$(this).attr('name'),valore=$(this).is(':checked')?'on':'off';$(`input[name="${name}${settings.hiddenSuffix}"]`).val(valore)});const observer=new MutationObserver(function(mutations){mutations.forEach(function(mutation){$(mutation.addedNodes).each(function(){const $node=$(this);if($node.is(`${settings.classFilter}.form-check-input[name]`))inizializza($node);$node.find(`${settings.classFilter}.form-check-input[name]`).each(function(){inizializza($(this))})})})});observer.observe(document.body,{childList:true,subtree:true});return this}})(jQuery);
